ALTER TABLE allhivedata RENAME TO sqlitestudio_temp_table;

CREATE TABLE allhivedata (
    hiveid              STRING (5)  NOT NULL,
    date                STRING      NOT NULL,
    hivetempf           INTEGER (5) DEFAULT NULL,
    hivetempc           INTEGER (4) DEFAULT NULL,
    hiveHum             INTEGER (5) DEFAULT NULL,
    yardid              INTEGER (3) NOT NULL
                                    REFERENCES yard (yardid) MATCH [FULL],
    hiveweight          INT (5)     DEFAULT NULL,
    SYNC                CHAR (1),
    BEEKEEPERID         INT,
    weather_stationID   INTEGER,
    observationDateTime DATETIME,
    weather_tempf       DECIMAL     DEFAULT NULL,
    weather_humidity    DECIMAL     DEFAULT NULL,
    weather_dewf        DECIMAL     DEFAULT NULL,
    weather_tempc                   DEFAULT NULL,
    wind_dir,
    wind_degrees                    DEFAULT (0),
    wind_gust_mph                   DEFAULT (0),
    wind_kph                        DEFAULT (0),
    wind_gust_kph                   DEFAULT (0),
    pressure_mb                     DEFAULT NULL,
    pressure_in                     DEFAULT NULL,
    pressure_trend,
    weather_dewc                    DEFAULT (0),
    solarradiation      NUMERIC     DEFAULT NULL,
    UV                              DEFAULT NULL,
    precip_1hr_in                   DEFAULT NULL,
    precip_1hr_metric   NUMERIC     DEFAULT (0),
    precip_today_string,
    precip_today_in     NUMERIC     DEFAULT (0),
    precip_today_metric             DEFAULT (0),
    wind_mph                        DEFAULT (0),
    hiverawweight       NUMERIC     DEFAULT NULL,
    lux                 NUMERIC     DEFAULT NULL,
    IN_COUNT            INTEGER     DEFAULT (0),
    OUT_COUNT           INTEGER     DEFAULT (0),
    id                  INTEGER     PRIMARY KEY AUTOINCREMENT
);

INSERT INTO allhivedata (
                            hiveid,
                            date,
                            hivetempf,
                            hivetempc,
                            hiveHum,
                            yardid,
                            hiveweight,
                            SYNC,
                            BEEKEEPERID,
                            weather_stationID,
                            observationDateTime,
                            weather_tempf,
                            weather_humidity,
                            weather_dewf,
                            weather_tempc,
                            wind_dir,
                            wind_degrees,
                            wind_gust_mph,
                            wind_kph,
                            wind_gust_kph,
                            pressure_mb,
                            pressure_in,
                            pressure_trend,
                            weather_dewc,
                            solarradiation,
                            UV,
                            precip_1hr_in,
                            precip_1hr_metric,
                            precip_today_string,
                            precip_today_in,
                            precip_today_metric,
                            wind_mph,
                            hiverawweight,
                            lux,
                            IN_COUNT,
                            OUT_COUNT
                        )
                        SELECT hiveid,
                               date,
                               hivetempf,
                               hivetempc,
                               hiveHum,
                               yardid,
                               hiveweight,
                               SYNC,
                               BEEKEEPERID,
                               weather_stationID,
                               observationDateTime,
                               weather_tempf,
                               weather_humidity,
                               weather_dewf,
                               weather_tempc,
                               wind_dir,
                               wind_degrees,
                               wind_gust_mph,
                               wind_kph,
                               wind_gust_kph,
                               pressure_mb,
                               pressure_in,
                               pressure_trend,
                               weather_dewc,
                               solarradiation,
                               UV,
                               precip_1hr_in,
                               precip_1hr_metric,
                               precip_today_string,
                               precip_today_in,
                               precip_today_metric,
                               wind_mph,
                               hiverawweight,
                               lux,
                               IN_COUNT,
                               OUT_COUNT
                          FROM sqlitestudio_temp_table;

DROP TABLE sqlitestudio_temp_table;

